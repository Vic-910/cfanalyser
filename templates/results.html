<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tag Stats for {{ handle }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
  <h2>Statistics for {{ handle }}</h2>

  <!-- Tag Stats Table -->
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Tag</th>
        <th>Attempted</th>
        <th>Solved</th>
        <th>Success Rate</th>
        <th>Avg Rating</th>
      </tr>
    </thead>
    <tbody>
      {% for stat in tag_stats %}
      <tr>
        <td>{{ stat.tag }}</td>
        <td>{{ stat.attempted }}</td>
        <td>{{ stat.solved }}</td>
        <td>{{ '{:.0%}'.format(stat.rate) }}</td>
        <td>{{ stat.avg_rating }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Weak Tags -->
  <h4>Weakest Tags</h4>
  <ul>
    {% for wt in weak_tags %}
      <li>{{ wt.tag }} â€” {{ '{:.0%}'.format(wt.rate) }} ({{ wt.attempted }} attempts)</li>
    {% endfor %}
  </ul>

  <!-- Suggestions -->
  {% if suggestions %}
  <h4>Suggested Unsolved Problems</h4>
  <ul>
    {% for p in suggestions %}
      <li>
        <a href="https://codeforces.com/problemset/problem/{{ p.contestId }}/{{ p.index }}" target="_blank">
          {{ p.name }}
        </a>
        <br>
        Tags: {{ p.tags | join(', ') }} |
        Rating: <strong>{{ p.rating if p.rating else 'N/A' }}</strong>
      </li>
    {% endfor %}
  </ul>
  {% endif %}

  <!-- Gemini Training Plan -->
{% if training_plan %}
<h4>ðŸ“˜ Personalized Training Plan</h4>
<div class="alert alert-success px-4 py-3">
  {{ training_plan | safe }}
</div>
{% endif %}


  <a href="/" class="btn btn-secondary mt-3">Try Another Handle</a>
</div>
</body>
</html>
